---
layout: default
title: Brief Architecture of Search Platform
description: A brief architecture of search platform implementation, suit for eCommerce/enterprise search.
keywords: search platform architecture, eCommerce, open source, tools
index: false
comments: disqus
---

<h3>
<a href="#architecture-of-search-platform" name="architecture-of-search-platform" class="anchor"><span class="octicon octicon-link"></span></a>
{{ page.title }}
</h3>

<p>
This article is about search platform architecture/design note for my latest years experiences,
no involved detail of search algorithm or indexing.
</p>

<h3>
<a href="#record-properties" name="record-properties" class="anchor"><span class="octicon octicon-link"></span></a>
Record properties
</h3>

<p>
One entity per index.
</p>

<p>
Generally speaking, record properties will only contains global common fields.
But put diff types together for search, could result in a big table with dozens of columns.
So for original data prepared index, may consider to use column-oriented NoSQL.
</p>

<p>
As a eCommerce example, sku properties would include:
<ul>
  <li>sku id</li>
  <li>sku name</li>
  <li>brand id</li>
  <li>brand name</li>
  <li>catalogs and categories (one per property)</li>
  <li>default catalog and category (for navigation and bread crumb)</li>
  <li>alternate skus</li>
  <li>start and end date</li>
  <li>family sku number (group)</li>
  <li>bunch of keywords for search</li>
  <li>any other properties need to save</li>
</ul>

<strong>Note:</strong> properties must not include:
price (but range could be, relate within record dimensions), stock status.
<br>
In another word, do not include properties change frequently.
</p>

<p>
Some search project like <a href="http://lucene.apache.org/solr/">Solr</a> support generate indexes via rdb mapping, this is very useful for startup of product.
But it become less-use when product grew up to a large-scale system. <br>
Build a new index loader for huge and complex data is required. 
The loader should well-design for data split, schedulable, push and/or poll.
</p>

<h3>
<a href="#facet" name="facet" class="anchor"><span class="octicon octicon-link"></span></a>
Facet (dimension)
</h3>

<p>
System would have thousands of categories. 
Single record may point to more than one, which should map to any category if related.
</p>

<p>
Like a laptop, have general product category (Product -> Technology -> Computers), and some particular detail (I call "Feature") such as memory, cpu.
</p>

<p>
Both category and feature are logically the same, which called Dimension.
The relationship of dimensions is actually a tree, usually save in a single table of database, and could be represent as a hash of arrays in program's memory.
<br>
Leaf-node dimensions are saving in record properties, to serve facet query.
</p>

<h3>
<a href="#search-browse" name="search-browse" class="anchor"><span class="octicon octicon-link"></span></a>
Search and Browse
</h3>

<p>
Web-styled application usually have two entrance: Search and Browse.
</p>

<p>
Search Mode: which is a html text input.<br>
System parse user term, then query into record properties. Should have place to predefine/modify logic and property hit rank (Server Side Algorithm).
</p>

<p>
Browse Mode: a friendly navigation guide for user.<br>
List dimension id and links (of course hit records as well) layer by layer, until leaf-node.
Fetch records with all leaf id calculated by current layer.
</p>

<h3>
<a href="#filter" name="filter" class="anchor"><span class="octicon octicon-link"></span></a>
Filter (refinement)
</h3>

<p>
</p>

<h3>
<a href="#order-sort" name="order-sort" class="anchor"><span class="octicon octicon-link"></span></a>
Order and Sort
</h3>

<p>
</p>

<h3>
<a href="#rule" name="rule" class="anchor"><span class="octicon octicon-link"></span></a>
Business Rule
</h3>

<p>
</p>

<h3>
<a href="#search-tools" name="search-tools" class="anchor"><span class="octicon octicon-link"></span></a>
Search Tools
</h3>

<p>
</p>

<h3>
<a href="#predictive" name="predictive" class="anchor"><span class="octicon octicon-link"></span></a>
Predictive Search
</h3>

<p>
</p>

<h3>
<a href="#related-search" name="related-search" class="anchor"><span class="octicon octicon-link"></span></a>
Related Search
</h3>

<p>
</p>

<h3>
<a href="#management-tools" name="management-tools" class="anchor"><span class="octicon octicon-link"></span></a>
Other Management Tools
</h3>

<p>
</p>
